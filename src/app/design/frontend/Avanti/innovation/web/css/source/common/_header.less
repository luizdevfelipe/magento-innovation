//  Common (styles-m.css) - reorganized
//  _____________________________________________
& when (@media-common =true) {}

// -------------------------
// **Global / Base styles**
// Regras aplicáveis a todos os tamanhos (estrutura e elementos principais)
// -------------------------

// Wrapper / estrutura do header
.page-header .panel.wrapper {
    .lib-css(min-height, 30px);
    // Background padrão tratado em media-queries específicas
}

.page-header .panel.wrapper .panel.header {
    .lib-css(padding, 0px);
}

// Mensagem promocional (barra superior)
.page-header .header.panel .promo-header-message {
    .lib-css(font-size, 14px);
    .lib-css(padding, 4px 0);
    .lib-css(line-height, 22px);
    .lib-css(text-align, center);
    .lib-css(font-weight, 700);
}

.page-header .header.panel .promo-header-message>strong:nth-child(1) {
    // Destaque primário dentro da mensagem promocional
    .lib-css(background-color, @theme__color__purple);
    .lib-css(padding, 0 3px);
    .lib-css(border-radius, 3px);
}

.page-header .header.panel .promo-header-message>strong:nth-child(2) {
    // Texto secundário da mensagem (estilo mais leve)
    .lib-css(font-weight, 300);
    font-style: italic;
}

// Busca (input) - estilo base
.page-header .header.content .block.block-search .block.block-content input[type="text"] {
    .lib-css(border-radius, 7px);
    .lib-css(padding, 18px 16px);
    .lib-css(border-color, #dddddd);

    &::placeholder {
        .lib-css(color, #0f0f0f);
    }
}

// Links de conta/usuario
.page-header .header.content .header.links {
    .lib-css(font-weight, 600);
}

.header.content .header.links .customer-auth-links .profile-icon img,
.header.content .header.links .greet.welcome .profile-icon img {
    // Ajuste visual do ícone do perfil
    .lib-css(transform, translateY(6px));
}

// Ação do carrinho (estrutura base)
.action.showcart {
    .lib-css(display, flex);
    .lib-css(align-items, center);
    .lib-css(gap, 8px);
    .lib-css(transform, translateY(6px));
}

.minicart-wrapper .action.showcart.active::before {
    content: "";
}

.minicart-wrapper .action.showcart .counter.qty {
    // Badge de quantidade do minicart
    .lib-css(border-radius, 50%);
    .lib-css(transform, translate(-13px, -13px));
    .lib-css(line-height, 20px);
    .lib-css(min-width, 16px);
    .lib-css(height, 20px);
}

.page-header .header.content .minicart-wrapper {
    .lib-css(margin, 0px);
}

.page-header .header.content .minicart-wrapper .action.showcart {
    .lib-css(transform, translateY(-1px));
}

// Ícone da lupa (usado na mini busca)
.header.content .block.block-content .form.minisearch .actions .action.search::before,
.header.content .block.block-content .form.minisearch .field.search .label::before {
    content: "";
    .lib-css(background-image, url("@{baseDir}images/search-ico.svg"));
    .lib-css(width, 19px);
    .lib-css(height, 19px);
}

// -------------------------
// **Mobile (max @screen__m)**
// Organização por ordem: estrutura -> promo -> branding/logo -> busca -> navegação/icones -> minicart
// -------------------------
.media-width(@extremum, @break) when (@extremum ="max") and (@break =@screen__m) {

    // Header: remoção de borda para versões mobile
    .page-header {
        .lib-css(border, none);
    }

    // Barra promocional - ajuste do segundo strong para ficar normal em mobile
    .page-header .header.panel .promo-header-message>strong:nth-child(2) {
        .lib-css(font-weight, 300);
        font-style: normal;
    }

    // Estrutura do conteúdo do header (altura e padding)
    .page-header .header.content {
        .lib-css(position, relative);
        .lib-css(padding, 0px);
        .lib-css(height, 132px);
    }

    // Ícone do menu (burger) - posicionamento
    .page-header .header.content .action.nav-toggle {
        .lib-css(top, 25px);
        .lib-css(left, 16px);
    }

    // Ícone do menu (imagem)
    .page-header .header.content .action.nav-toggle::before {
        content: "";
        .lib-css(background-image, url("@{baseDir}images/menu-burger.svg"));
        .lib-css(width, 24px);
        .lib-css(height, 24px);
    }

    // Logo: centralizada na versão mobile
    .page-wrapper .page-header .header.content a.logo {
        .lib-css(position, absolute);
        .lib-css(margin, 22px 0 0 0);
        .lib-css(left, 50%);
        .lib-css(transform, translateX(-50%));
    }

    // Busca: espaçamento e controle visual em mobile
    .page-header .header.content .block.block-search {
        .lib-css(margin-top, 61px);
    }

    .header.content .block.block-content .field.search .control {
        .lib-css(border, none);
    }

    .header.content .block.block-content .form.minisearch .field.search .label {
        .lib-css(position, absolute);
        .lib-css(left, 80%);
        .lib-css(top, 20%);
    }

    .header.content .block.block-content .form.minisearch.active {
        .lib-css(margin, 30px 16px 16px 16px);
    }

    // Ícone do carrinho (mobile)
    .minicart-wrapper .action.showcart::before {
        content: "";
        .lib-css(background-image, url("@{baseDir}images/cart-m.svg"));
        .lib-css(width, 24px);
        .lib-css(height, 24px);
    }

    // Posicionamento do minicart em mobile
    .minicart-wrapper {
        .lib-css(position, absolute);
        .lib-css(top, 20%);
        .lib-css(left, 86%);
    }

    // Painel superior do header no mobile
    .page-header .header.panel {
        .lib-css(padding, 4px 12px);
        .lib-css(text-align, center);
    }

    // Oculta links no header na versão mobile
    .page-header .header.content .header.links {
        .lib-css(display, none);
    }

    // Ajuste de cores do wrapper no mobile (quando necessário)
    .page-header .panel.wrapper {
        .lib-css(background-color, @theme__color__primary);
    }
}

// -------------------------
// **Desktop (min @screen__m)**
// Organização por ordem: estrutura -> layout flex -> busca -> logo -> links -> minicart -> navegação
// -------------------------
.media-width(@extremum, @break) when (@extremum ="min") and (@break =@screen__m) {

    // Wrapper com background principal em desktop
    .page-header .panel.wrapper {
        .lib-css(background-color, @theme__color__primary);
    }

    // Layout do header em desktop (centro e max-width)
    .page-header .header.content {
        .lib-css(display, flex);
        .lib-css(max-width, 1260px);
        .lib-css(padding, 0px);
        .lib-css(padding-bottom, 20px);
    }

    // Busca: dimensões e posicionamento em desktop
    .page-header .header.content .block.block-search {
        .lib-css(margin-right, clamp(60px, 16.74vw, 211px));
        .lib-css(margin-left, 65px);
        .lib-css(margin-top, 17px);
        .lib-css(padding, 0px);
        .lib-css(float, left);
        .lib-css(width, 600px);
    }

    .page-header .header.content .block.block-search .block.block-content input[type="text"] {
        .lib-css(min-width, 275px);
    }

    .actions .action.seach {
        .lib-css(transform, translateY(3px));
    }

    // Logo: ajuste de espaçamento em desktop
    .logo {
        .lib-css(margin-top, 22px);
        .lib-css(margin-right, 0px);
    }

    .logo img {
        .lib-css(min-width, 100%);
    }

    // Links do header: lista e estilo em desktop
    .page-header .header.content .header.links {
        .lib-list-reset-styles();
        .lib-css(font-size, 14px);
        .lib-css(min-width, fit-content);
        .lib-css(height, 24px);
        .lib-css(margin-top, 20px);
        .lib-css(color, black);
        .lib-css(display, flex);
        .lib-css(flex-wrap, nowrap);
        .lib-css(align-items, baseline);
        .lib-css(gap, 5px);
    }

    .page-header .header.content .header.links a {
        .lib-css(color, black);
    }

    // .customer.welcome: ajustes específicos removidos (não há regras necessárias no momento)

    // Mini search field height
    .header.content .block.block-content .form.minisearch .field.search {
        .lib-css(height, 40px);
    }

    // Ícone do carrinho (desktop)
    .minicart-wrapper .action.showcart::before {
        content: "";
        .lib-css(background-image, url("@{baseDir}images/cart-l.svg"));
        .lib-css(width, 24px);
        .lib-css(height, 24px);
    }

    .page-header .header.content .minicart-wrapper {
        .lib-css(margin, 22px 0px 0px 34px);
    }

    // Navegação principal (desktop)
    .navigation ul {
        .lib-css(display, flex);
        .lib-css(justify-content, space-between);
    }

    // Seção customizada incluída aqui por conveniência (pode ser movida se necessário)
    .custom-featured-section {
        .lib-css(text-align, center);
        .lib-css(padding, 30px 0);

        h1 {
            .lib-css(font-size, 28px);
            .lib-css(margin-bottom, 20px);
            .lib-css(color, #000);
            .lib-css(font-weight, bold);
        }

        .featured-items {
            .lib-css(display, flex);
            .lib-css(justify-content, space-between);
            // .lib-css(gap, 40px);
            .lib-css(flex-wrap, wrap);

            .featured-item {
                .lib-css(text-align, center);

                img {
                    .lib-css(margin-bottom, 10px);
                }

                a {
                    .lib-css(display, block);
                    .lib-css(font-size, 14px);
                    .lib-css(color, #000);
                    .lib-css(text-decoration, none);

                    &:hover {
                        .lib-css(text-decoration, underline);
                    }
                }
            }
        }
    }

    .page-footer {
        .lib-css(background-color, #F5F5F5);
        .lib-css(padding, 64px 0);
    }
}